# Rocket viz

Interactive browser visualization for `rocket_traj.parquet` generated by `rocket/rocket_sim_jax.py`.

Features
- Load Parquet (pyarrow) or CSV
- Linked plots: position, velocity, Euler angles (deg)
- Click plots to move time cursor
- Play/pause with adjustable speed
- 3D view of rocket pose with Z-up coordinates; double-click to add snapshots
- Pretty SVG rocket asset
- Navball panel with textured sphere and prograde/retrograde markers; speed and heading readouts

## Run locally
You can serve this folder statically and open the app in your browser.

- Option A: from repo root, run a simple HTTP server and navigate to `/rocket/viz/`.
- Ensure `rocket_traj.parquet` is at repo root (created by running `python rocket/rocket_sim_jax.py`).

Example (from repo root):

```sh
python -m http.server 8000
# then open http://localhost:8000/rocket/viz/
```

Or open `index.html` directly and click "Load sample" then select the file manually if cross-origin blocks the fetch.

## CSV schema
If you export CSV, headers should be: `t,x,y,z,vx,vy,vz,qx,qy,qz,qw,omx,omy,omz,fuel`.

## Notes
- Parquet is decoded in-browser using `parquet-wasm` + Arrow JS via CDN.
- 3D rendering uses Three.js via CDN.
- Navball auto-binds to the same arrays used by the app (expects `t,vx,vy,vz,qx,qy,qz,qw`), listens to the existing time slider, and also accepts a custom event:
  - Dispatch `window.dispatchEvent(new CustomEvent('viz:frame', { detail: { i, t, vx,vy,vz, qx,qy,qz,qw } }))` to push a frame explicitly.
  - Or bind once via `window.Navball.bind({ t,vx,vy,vz,qx,qy,qz,qw })` and call `window.Navball.updateIndex(i)`.
